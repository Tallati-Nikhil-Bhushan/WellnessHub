<!-- register.component.html -->
<div class="container">
    <h2>Register</h2>
    <form (ngSubmit)="register()" #registerForm="ngForm">
      <div class="form-group">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          class="form-control"
          [(ngModel)]="user.username"
          name="username"
          (ngModelChange)="checkUsername($event)"
          required
        />
        <div *ngIf="usernameError" class="error-message">
          {{ usernameError }}
        </div>
      </div>
      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          class="form-control"
          [(ngModel)]="user.email"
          name="email"
          required
        />
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          class="form-control"
          [(ngModel)]="user.password"
          name="password"
          required
        />
      </div>
      <div class="form-group">
        <label for="age">Age</label>
        <input
          type="number"
          id="age"
          class="form-control"
          [(ngModel)]="user.age"
          name="age"
          required
        />
      </div>
      <div class="form-group">
        <label for="gender">Gender</label>
        <select
          id="gender"
          class="form-control"
          [(ngModel)]="user.gender"
          name="gender"
          required
        >
          <option value="" disabled>Select gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="non-binary">Non-binary</option>
          <option value="prefer-not-to-say">Prefer not to say</option>
        </select>
      </div>
      <div class="form-group">
        <label for="height">Height (cm)</label>
        <input
          type="number"
          id="height"
          class="form-control"
          [(ngModel)]="user.height"
          name="height"
          required
        />
      </div>
      <div class="form-group">
        <label for="weight">Weight (kg)</label>
        <input
          type="number"
          id="weight"
          class="form-control"
          [(ngModel)]="user.weight"
          name="weight"
          required
        />
      </div>
      <div class="form-group">
        <label for="activityLevel">Activity Level (1-5)</label>
        <input
          type="number"
          id="activityLevel"
          class="form-control"
          [(ngModel)]="user.activityLevel"
          name="activityLevel"
          min="1"
          max="5"
          required
        />
      </div>
      <div class="form-group">
        <label for="dietaryPreference">Dietary Preference</label>
        <select
          id="dietaryPreference"
          class="form-control"
          [(ngModel)]="user.dietaryPreference"
          name="dietaryPreference"
          required
        >
          <option value="" disabled>Select dietary preference</option>
          <option value="veg">Vegetarian</option>
          <option value="non-veg">Non-Vegetarian</option>
        </select>
      </div>
      <button type="submit" [disabled]="!isUsernameAvailable" class="btn btn-primary">
        Register
      </button>
    </form>
    <div>
      <p>Already have an account? <a routerLink="/login">Login here</a></p>
    </div>
  </div>
  